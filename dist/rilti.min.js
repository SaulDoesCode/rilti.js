{const a=void 0,b=Array.isArray,c=(b)=>b===a||null===b,d=(b)=>b!==a&&null!==b,e=(a)=>'object'==typeof a&&a.constructor===Object,f=(a)=>'function'==typeof a,g=(a)=>'boolean'==typeof a,h=(a)=>'string'==typeof a,i=(a)=>'number'==typeof a&&!isNaN(a),j=(a)=>i(a)&&0==a%1,k=(a)=>b(a)||d(a)&&0==a.length%1&&!(f(a)||m(a)),l=(a,b=!0)=>a instanceof NodeList||b&&s(a,m),m=(a)=>a instanceof Node,p=(a)=>h(a)||i(a)||g(a),q=(a)=>'object'==typeof a&&f(a.then),n=(a)=>a instanceof RegExp,o=(a)=>a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement,r=(a)=>m(a)||p(a)||aa(a)||s(a,r)||q(a),s=(a,b)=>{if(k(a)){const c=f(b);for(let d=0;d<a.length;d++)if(c?!b(a[d]):a[d]!==b)return!1;return!0}return!1},t=(b,c=b.length,...d)=>c<=d.length?b(...d):t.bind(a,b,c,...d),u=(a,c=[],d=!0)=>d&&!b(a)?[a]:(a.forEach((a)=>b(a)?u(a,c):c.push(a)),c),v=(a,...b)=>setTimeout(a,0,...b),w=(b)=>{document.body||'complete'===document.readyState?setTimeout(b,0,a):window.addEventListener('DOMContentLoaded',b)},x=(a,b)=>{if(d(a))if(e(a))for(const c in a)b(a[c],c,a);else if(a.length){const c=a.length;for(let d=0;d!==c;)b(a[d],d++,a)}else if(a.forEach)a.forEach(b);else if(j(a))for(let c=0;c!==a;)b(c++,a);return a},y=(a,b=document)=>m(a)?a:y(b).querySelector(a),z=(a,b,c)=>w(()=>b(y(a,c))),A=(a,b=document)=>Array.from(y(b).querySelectorAll(a)),B=(a,b,c=document)=>(f(b)||([b,c]=[c,document]),x(A(a,c),b)),C=t((b,c,d,g,i=!1)=>{if(h(c)&&(c=y(c)),e(d))return x(d,(a,e)=>{d[e]=C(b,c,e,a,i)});if(!f(g))return C.bind(a,b,c,d);g=g.bind(c);const j=m(c)?ba(c):c,k=(a)=>{g(a,j),b&&l()},l=()=>(c.removeEventListener(d,k),o),n=(a)=>(b=!!a,c.addEventListener(d,k,i),o),o={handler:k,on:n,off:l,once:n.bind(a,!0)};return n(b)},3),D={get:(a,b)=>(c,d,e)=>a(c,b,d,e)},E=new Proxy(C(!0),D),F=new Proxy(C(!1),D),G=(a,b,c)=>(a.dispatchEvent(new CustomEvent(b,{detail:c})),a),H=(b,c=!1)=>new Proxy(b,{get:(b,d)=>c&&d in b&&Reflect.get(b,d)||b.bind(a,d)}),I=(a={},b=new Map)=>Object.assign(a,{listeners:b,emit:H((a,...c)=>{b.has(a)&&b.get(a).forEach((a)=>a(...c))}),emitAsync:H((a,...c)=>v(()=>{b.has(a)&&b.get(a).forEach((a)=>v(a,...c))})),on:H((c,d)=>(b.has(c)||b.set(c,new Set),b.get(c).add(d),()=>a.off(c,d))),once:H((b,c)=>a.on(b,function d(){c(...arguments),a.off(b,d)})),off:H((a,c)=>{if(b.has(a)){const d=b.get(a);d.delete(c),d.size||b.delete(a)}})}),J=(a,b)=>{const c=ba(a);for(const d in b){let e=b[d];if(d in a)a[d]=e;else if('accessors'==d)for(const b in e){const{set:d=e[b],get:g=e[b]}=e[b],h={};f(d)&&(h.set=d.bind(a,c)),f(g)&&(h.get=g.bind(a,c)),Object.defineProperty(a,b,h)}else!f(e)||aa(e)||qa(e)?Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(b,d)):a[d]=e.call(a,c)}},K=(a,b)=>{const c=ba(a);for(const d in b)Object.defineProperty(a,d,{value:b[d].bind(a,c)})},L=(a,b=document)=>l(a)?Array.from(a).every((a)=>L(a)):b===a||!!(16&b.compareDocumentPosition(a)),M=(a)=>(b,c)=>a[g(c)?c?'add':'delete':'has'](b),N=M(new WeakSet),O=M(new WeakSet),P=M(new WeakSet),Q=(a,b=!N(a),c=da(a))=>{b&&!c&&(N(a,!0),G(a,'create'))},R=(a)=>{Q(a),O(a)||(P(a)?(P(a,!1),G(a,'remount')):da(a)?fa(a,'mount'):(O(a,!0),G(a,'mount')))},S=(a)=>{O(a,!1),P(a,!0),G(a,'unmount')},T=(a,c)=>q(a)&&m(c)?void a.then((a)=>{V(W(a),c)}):m(a)?a:f(a)?T(a(c)):b(a)?V(a):document.createRange().createContextualFragment(a),U=(b)=>b===a?document.createDocumentFragment():T(b),V=(c,d,e='appendChild',f=U())=>{if(m(c))return d?d[e](c):f.appendChild(c),f;for(var g=0;g<c.length;){let e=c[g];if(b(e)){g+=e.length;for(let b=0;b<e.length;b++){const c=T(e[b],d);c!==a&&(f.appendChild(c),R(c))}}else e=T(e,d),e!==a&&(f.appendChild(e),R(e)),g++}return d&&d[e](f),f},W=(...c)=>{for(let d,g=0;g<c.length;g++){if(d=c[g],m(d)||f(d)||q(d))continue;else p(d)&&(d=document.createRange().createContextualFragment(d).childNodes);const h=d instanceof NodeList;if(h){if(2>d.length){c[g]=d[0];continue}d=Array.from(d)}else e(d)&&(d=Object.values(d));if(b(d)){if(!h&&(d=W.apply(a,d),2>d.length)){c[g]=d[0];continue}const b=d.length;d.unshift(g,1),c.splice.apply(c,d),d.slice(2,0),g+=b}else throw new Error(`illegal renderable: ${d}`)}return c},X=(a,c,...d)=>{if(f(a)&&(a=a()),h(a))return z(a,(a)=>X(a,c,...d));const e=m(a);if(e&&('after'===c||'before'===c)&&!L(a))return void E.mount(a,()=>X(a,c,...d));if(d=W(d),e)V(d,a,c);else if(b(a))for(let b=0;b<d.length;b++)a.push(d[b]);return 2>d.length?d[0]:d},Y=(a,b=document.body||'body',c='appendChild')=>X(b,c,a),Z={css(a,b,c){return e(b)?x(b,(b,c)=>Z.css(a,c,b)):h(b)&&(0===b.indexOf('--')?a.style.setProperty(b,c):a.style[b]=c),a},class(a,d,c=!a.classList.contains(d)){return b(a)?a.forEach((a)=>Z.class(a,d,c)):(e(d)?x(d,(b,c)=>Z.class(a,c,g(b)?b:!a.classList.contains(c))):(h(d)&&(d=d.split(' ')),b(d)&&d.forEach((b)=>{a.classList[(g(c)?c:!a.classList.contains(b))?'add':'remove'](b)})),a)},hasClass:t((a,b)=>a.classList.contains(b)),attr(b,a,d){if(e(a))x(a,(d,e)=>{b[c(d)?'removeAttribute':'setAttribute'](e,d),ma(b,e)});else if(h(a)){if(c(d))return b.getAttribute(a);const e=b.getAttribute(a);b.setAttribute(a,d),ma(b,a,e,d)}return b},removeAttribute(b,...c){return u(c).forEach((c)=>{b.removeAttribute(c),ma(b,c,a,a,!1)}),b},attrToggle(a,b,c=!a.hasAttribute(b),d=a.getAttribute(b)){return a[c?'setAttribute':'removeAttribute'](b,d),ma(a,b,c?d:null,c?null:d,c),a},emit:G,append:(a,...b)=>X(a,'append',...b),prepend:(a,...b)=>X(a,'prepend',...b),appendTo:(a,b)=>X(b,'append',a),prependTo:(a,b)=>X(b,'prepend',a),clear(a){return a[o(a)?'value':'innerHTML']='',a},remove(a,c){return(f(a)&&(a=a()),b(a))?a.forEach((a)=>Z.remove(a,c)):(i(c)?setTimeout(()=>Z.remove(a),c):L(a)?a.remove():l(a)&&Array.from(a).forEach((a)=>Z.remove(a)),a)}},_=new Map,aa=M(new WeakSet),ba=(b)=>{if(aa(b))return b;if(h(b)&&(b=y(b)),_.has(b))return _.get(b);if(!m(b))throw new TypeError(`$ needs a Node: ${b}`);const c=new Proxy(Z.class.bind(a,b),{get:(a,c)=>b.classList.contains(c),set:(a,b,c)=>a(b,c),deleteProperty(a,c){return b.classList.remove(c),!0}}),e=new Proxy(Z.attr.bind(a,b),{get(c,d){return'has'===d?(a)=>b.hasAttribute(a):'remove'===d||'rm'===d?Z.removeAttribute.bind(a,b):b.getAttribute(d)},set(a,c,d){return'remove'===c?Z.removeAttribute(b,d):a(c,d),!0},deleteProperty:(a,c)=>Z.removeAttribute(b,c)}),g=o(b)?'value':'textContent',i=o(b)?'value':3===b.nodeType?g:'innerHTML',j=H(C(!0,b),!1),k=H(C(!1,b),!1),l=new Proxy((a)=>(f(a)&&!aa(a)&&a.call(b,l,b),b),{get(a,d){return'class'===d?c:'attr'===d?e:'txt'===d?b[g]:'html'===d?b[i]:'on'===d?k:'once'===d?j:'emit'===d?G.bind(b,b):'mounted'===d?L(b):'render'===d?Y.bind(b,b):'children'===d?Array.from(b.children):'$children'===d?Array.from(b.children).map(ba):'parent'===d&&b.parentNode?ba(b.parentNode):d in Z?Z[d].bind(b,b):!f(b[d])||aa(b[d])||qa(b[d])?b[d]:b[d].bind(b)},set(a,f,j){return'class'===f?c(b,j):'attr'===f?e(b,j):'css'===f?Z.css(b,j):'txt'===f?b[g]=j:'html'===f||'children'===f?h(j)&&b[i]!==j?b[i]=j:(b[g]='',d(j)&&X(b,'appendChild',j)):b[f]=j,!0}});return _.set(b,l),aa(l,!0),l},ca=(a)=>a.tagName||(a+'').toUpperCase(),da=(a)=>ea.has(h(a)?a:ca(a)),ea=new Map,fa=(a,b,c,d)=>{if(1!==!a.nodeType&&ea.has(a.tagName)){h(b)?[c,b]=[b,ea.get(a.tagName)]:!e(b)&&(b=ea.get(a.tagName));const{create:f,mount:g,remount:i,unmount:j,props:k,methods:l,attr:m}=b,n=ba(a);if(!N(a)){if(l&&K(a,l),k&&J(a,k),d&&J(a,d),N(a,!0),f&&f.call(a,n),G(a,'create'),e(m))for(const b in m)ka(a,b,m[b]);i&&F.remount(a,i.bind(a,n))}return O(a)||'mount'!==c?'unmount'===c&&(O(a,!1),P(a,!0),j&&j.call(a,n),G(a,c)):P(a)?(i&&i.call(a,n),G(a,'remount')):(O(a,!0),g&&g.call(a,n),G(a,c)),a}},ga=H(function(a,c){const d='string'==typeof a?document.createElement(a):a;if(e(c))for(const a in c)a in d?d[a]=c[a]:'$'==a||'render'==a?c[a].nodeType?c[a].appendChild(d):X(c[a],'appendChild',d):Z.hasOwnProperty(a)?Z[a](d,c[a]):0===a.indexOf('on')?F(d,c[a]):0===a.indexOf('once')?E(d,c[a]):d.setAttribute(a,c[a]);const f=Array.prototype.slice.call(arguments,2);if(('string'==typeof c||c instanceof Node)&&f.unshift(c),f.length)for(let a,c=0;c<f.length;c++)a=f[c],'string'==typeof a?a=new Text(a):'function'==typeof a&&(a=a(d)),a instanceof Node?d.appendChild(a):b(a)&&V(a,d);return d}),ha=H(Object.assign((c,d,...g)=>{const h='string'==typeof c?document.createElement(c):c,i=da(h.tagName);if(i)var j;if(3!==h.nodeType){if(r(d))g.unshift(d);else if(f(d)){const a=d(h);a!==h&&r(a)&&g.unshift(a)}g.length&&X(h,'appendChild',...g)}const k=ba(h);if(e(d)){var l=d.pure;for(const a in!i&&d.props&&J(h,d.props),d.methods&&K(h,d.methods),d.sync&&(d.sync=d.sync(h)),d){const c=0===a.indexOf('once'),e=!c&&0===a.indexOf('on');if(c||e){const e=c?4:2,f=a.substr(0,e);let g=a.substr(e);const i=C(c),j=b(d[a])?d[a]:[d[a]];d[f]||(d[f]={}),d[f][g]=g.length?i(h,g,...j):i(h,...j)}else if(a in h)f(h[a])?h[a][b(d[a])?'apply':'call'](h,d[a]):h[a]=d[a];else if(a in Z){const c=b(d[a])?Z[a](h,...d[a]):Z[a](h,d[a]);c!==h&&(d[a]=c)}}if(d.cycle){const{mount:a,create:b,remount:c,unmount:e}=d.cycle;E.create(h,()=>{N(h,!0),b&&b.call(h,k||h)}),a&&E.mount(h,a.bind(h,k||h)),d.cycle.unmount=e&&F.unmount(h,e.bind(h,k||h)),d.cycle.remount=c&&F.remount(h,c.bind(h,k||h))}i&&(fa(h,a,a,d.props),j=!0);const c=d.$||d.render;c?X(c,'appendChild',h):d.renderAfter?X(d.renderAfter,'after',h):d.renderBefore&&X(d.renderBefore,'before',h)}return i?!j&&fa(h,a):Q(h),l?h:k},{text:(b,c='')=>(p(b)&&([c,b]=[b,a]),ha(new Text(c),b)),body:(...a)=>(Y(a=W(a)),1<a.length?a:a[0]),svg:(...a)=>ha(document.createElementNS('http://www.w3.org/2000/svg','svg'),...a),frag:U,prime:W}),!0),ia=new Map,ja=(a,b)=>ia.has(a)&&ia.get(a)(b),ka=(a,b,c)=>{a=ba(a);const{init:d,update:e,remove:f}=c,g=(c,e)=>c&&!ja(b,a)?(d&&d(a,e),ia.has(b)||ia.set(b,M(new WeakSet)),ia.get(b)(a,!0),!0):ja(b,a);let h=!1,i=a.getAttribute(b);g(a.hasAttribute(b),i);const j=a.on.attr(({detail:{name:c,value:d,oldvalue:j,present:k}})=>{b===c&&i!==d&&d!==j&&g(k,d)&&(k?(e&&e(a,d,i),h=!1):!h&&(f&&f(a,d,i),h=!0),i=d)}).off;return()=>{j(),ia.has(b)&&ia.get(b)(a,!1)}},la=new Map,ma=(a,b,c,d=a.getAttribute(b),e=a.hasAttribute(b))=>{la.has(b)&&la.get(b).init(ba(a)),G(a,'attr',{name:b,value:d,oldvalue:c,present:e})},na=(a)=>fa(a,'mount')||R(a),oa=(a)=>fa(a,'unmount')||S(a);new MutationObserver((a)=>{for(let b=0;b<a.length;b++){const{addedNodes:c,removedNodes:d,attributeName:e}=a[b];if(c.length)for(let a=0;a<c.length;a++)na(c[a]);if(d.length)for(let a=0;a<d.length;a++)oa(d[a]);'string'==typeof e&&ma(a[b].target,e,a[b].oldValue)}}).observe(document,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0});const pa=(a,b={})=>(a.forEach((a,c)=>{b[c]=a}),JSON.stringify(b)),qa=M(new WeakSet),ra={isArr:b,isNil:c,isDef:d,isObj:e,isFunc:f,isBool:g,isStr:h,isNum:i,isArrlike:k,isNodeList:l,isNode:m,isPrimitive:p,isPromise:q,isRenderable:r,isRegExp:n,isInput:o,isEmpty:(a)=>c(a)||!((e(a)?Object.keys(a):a).length||a.size),isEl:(a)=>a instanceof Element,attributeObserver:ka,flatten:u,curry:t,components:ea,component:(a,b)=>{if(!a.includes('-'))throw new Error(`component: ${a} tagName is un-hyphenated`);return ea.set(a.toUpperCase(),b),w(()=>B(a,fa)),ha[a]},run:w,render:Y,runAsync:v,query:y,queryAsync:z,queryAll:A,queryEach:B,on:F,once:E,emitter:I,each:x,fastdom:ga,dom:ha,domfn:Z,directive:(a,{init:b,update:c,remove:d,accessors:e,toggle:f})=>{const g=new Map;g.init=(e)=>{ja(a,e)||g.set(e,ka(e,a,{init:b,update:c,remove:d}))},g.stop=(a)=>{g.has(a)&&g.get(a)()},la.set(a,g),w(()=>B('['+a+']',(b)=>ma(b,a)))},directives:la,prime:W,map2json:pa,model:(i,j=I(),k=new Map)=>{const{emit:l,emitAsync:m,on:p,once:r}=j,s=(a,c)=>(b(a)?a.forEach((a)=>s(a,c)):(k.delete(a),!c&&(l('delete',a),l('delete:'+a))),w),t=(a)=>k.has(a),w=(a,f,g)=>{if(e(a))for(const b in a)c(a[b])?s(b,f):w(b,a[b],f);else if(b(a))a.forEach(([a,b])=>w(a,b,f));else{const b=k.get(a);return d(f)&&f!==b?(k.set(a,f),g||(l('set',a,f),l('set:'+a,f)),f):(g||(l('get',a),l('get:'+a)),b)}},v=new Map,y=new Proxy(function(a,c,d=c){if(b(a)){const b=Array.from(arguments).slice(1);if(b.every(h))return y.template(a,...b)}else aa(a)&&(a=a());const e=o(a);e&&([d,c]=[c,'value']),v.has(a)||v.set(a,new Map);let f='set';if(d.includes(':')){[f,d]=d.split(':');var g='valid'===f,i='compute'===f}if(v.get(a).set(d,p(f+':'+d,(b)=>{a[c]=b})),!g&&e)var j=ba(a).on.input(()=>{w(d,a[c].trim()),A.has(d)&&B(d)});return g?a[c]=B(d):i&&D.has(d)?a[c]=E(d):t(d)&&(a[c]=w(d)),r('delete:'+d,()=>{j&&j(),y.stop(a,d)}),a},{get:(a,b)=>Reflect.has(a,b)?Reflect.get(a,b):(d,e=b,f)=>c(d)?y.text(b):a(d,e,b,f)});y.stop=(a,b)=>{if(t(a)){const c=v.get(a);b?c.has(b)&&(c.get(b).off(),c.delete(b)):c.forEach((a)=>a.off()).clear(),c.size||v.delete(a)}return a},y.text=H((a)=>y(new Text,'textContent',a)),y.template=(a,...b)=>u(b.reduce((b,c,d)=>[b,y.text(c),a[d+1]],a[0]).filter((a)=>!h(a)||a.length));const z=new Proxy((a,b)=>t(a)?b(k.get(a)):r('set:'+a,b),{get:(a,b)=>new Promise((a)=>{t(b)?a(k.get(b)):r('set:'+b,a)}),set:(b,c,d)=>d.then(w.bind(a,c))}),A=new Map,B=(a)=>{const b=k.has(a)&&A.has(a)&&A.get(a)(k.get(a));return l('validate:'+a,b),l('validate',a,b),b},C=new Proxy((a,b)=>{if(c(b))return B(a);if(n(b)){const a=b;b=(b)=>h(b)&&a.test(b)}if(f(b)){if(!g(b()))throw new Error(`".${a}": validator invalid`);A.set(a,b)}},{get:(a,b)=>B(b),set:(a,b,c)=>a(b,c)}),D=new Map,E=new Proxy(function(a,b){if(f(b))D.set(a,b);else if(h(b)){const a=Array.from(arguments);if(a.every(h)){const b={};return a.forEach((a)=>{b[a]=E(a)}),b}}if(D.has(a)){const b=D.get(a),c=b(G);return b.result!==c&&(m('compute:'+a,c),m('compute',a,c),b.result=c),c}e(a)&&x(a,(a,b)=>E(b,a))},{get:(a,b)=>a(b),set:(a,b,c)=>a(b,c)}),F=()=>Array.from(k.entries());if(h(i))try{w(JSON.parse(i),!0)}catch(a){}else d(i)&&w(i,!0);const G=new Proxy(Object.assign(w,j,{compute:E,async:z,valid:C,each:(a)=>(k.forEach(a),G),has:t,del:s,map:(a)=>{k.forEach((b,d)=>{const e=a(b,d);c(e)||e===b||k.set(d,b)})},filter:(a)=>{k.forEach((b,c)=>{a(b,c)||k.delete(c)})},store:k,sync:y,syncs:v,toJSON:()=>pa(k),toArray:F,toJSONArray:()=>JSON.stringify(F())}),{get:(a,b)=>Reflect.has(a,b)?a[b]:'size'===b?k.size:w(b),set:(a,b,c)=>q(c)?z(b,c):w(b,c),delete:(a,b)=>s(b)});return qa(G,!0),G},Mounted:O,Unmounted:P,Created:N,ProxiedNodes:_,$:ba};'function'==typeof define&&define.amd?define([],()=>ra):'object'==typeof module&&module.exports?module.exports=ra:this.rilti=ra}