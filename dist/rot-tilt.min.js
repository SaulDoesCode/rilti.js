var _Mathmin=Math.min,_Mathmax=Math.max;{const{isNode:a,isNodeList:b,isArr:c,isStr:d,dom:e,each:f}=rot,{on:g,div:h}=e,i=(k)=>""===k||!0===k||1===k,j={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1",speed:"300",transition:!0,axis:null,glare:!1,"max-glare":1,reset:!0};window.Tilt=(k,l={})=>{if(d(k)&&(k=e.queryAll(k)),!a(k)){if(b(k))return f(k,(F)=>Tilt(F,l));throw`Can't initialize Tilt because ${k} is not a Node.`}k=e(k),k.pure.tiltOff&&k.pure.tiltOff();let r,s,m=null,n=null,o=null,p=null,q=null;for(const F in j)F in l||(l[F]=j[F]);const t=l.reverse?-1:1,u=i(l.glare);if(u)var v=h({class:"js-tilt-glare",css:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"},render:k}),w=h({class:"js-tilt-glare-inner",render:v,css:{position:"absolute",top:"50%",left:"50%","pointer-events":"none","background-image":`linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)`,width:`${2*k.offsetWidth}px`,height:`${2*k.offsetWidth}px`,transform:"rotate(180deg) translate(-50%, -50%)","transform-origin":"0% 0%",opacity:"0"}}),z=g(window,"resize",()=>{const F=`${2*k.offsetWidth}`;w.css={width:F,height:F}});const A=()=>{clearTimeout(q),k.style.transition=l.speed+"ms "+l.easing,u&&(w.style.transition=`opacity ${l.speed}ms ${l.easing}`),q=setTimeout(()=>{k.style.transition="",u&&(w.style.transition="")},l.speed)},B=()=>{let F=(r.clientX-o)/m,G=(r.clientY-p)/n;F=_Mathmin(_Mathmax(F,0),1),G=_Mathmin(_Mathmax(G,0),1);let H=(t*(l.max/2-F*l.max)).toFixed(2),I=(t*(G*l.max-l.max/2)).toFixed(2),J=Math.atan2(r.clientX-(o+m/2),-(r.clientY-(p+n/2)))*(180/Math.PI),L=100*G;k.style.transform=`perspective(${l.perspective}px)
          rotateX(${"x"===l.axis?0:I}deg)
          rotateY(${"y"===l.axis?0:H}deg)
          scale3d(${l.scale},${l.scale},${l.scale})`,u&&w.css({transform:`rotate(${J}deg) translate(-50%, -50%)`,opacity:`${L*l["max-glare"]/100}`}),s=null},C=k.on("mouseenter",()=>{const F=k.rect;m=k.offsetWidth,n=k.offsetHeight,o=F.left,p=F.top,k.style.willChange="transform",A()}),D=k.on("mousemove",(F)=>{null!==s&&cancelAnimationFrame(s),r=F,s=requestAnimationFrame(B)}),E=k.on("mouseleave",()=>{A(),l.reset&&(requestAnimationFrame(()=>{r={pageX:o+m/2,pageY:p+n/2},k.style.transform=`perspective(${l.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`}),u&&w.css({transform:"rotate(180deg) translate(-50%, -50%)",opacity:"0"}))});return k.pure.tiltOff=()=>{return C.off(),D.off(),E.off(),u&&(z.off(),v.remove()),null!==s&&cancelAnimationFrame(s),k.pure.tiltOff=null,k},k},rot.observeAttr("tilt",{init(k,l){console.log("init");let m={};d(l)&&l.split(";").forEach((n)=>{n.includes(":")&&(n=n.split(":"),m[n[0]]=!("true"!==n[1])||"false"!==n[1]&&n[1])}),Tilt(k,m)},update(k,l){console.log("update");let m={};d(l)&&l.split(";").forEach((n)=>{n.includes(":")&&(n=n.split(":"),m[n[0]]=!("true"!==n[1])||"false"!==n[1]&&n[1])}),Tilt(k,m)},destroy(k){console.log("destroy"),k.tiltOff()}})}
