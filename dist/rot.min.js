var _this=this;((b,e)=>{const f='rot';b[f]=e(),'undefined'!=typeof module&&module.exports?module.exports=e():'function'==typeof define&&define.amd&&define(f,e)})(this,()=>{'use strict';const b=window||global||_this,e=document,f=void 0,g=(qa,ra=qa.length)=>{const sa=(...ta)=>(...ua)=>{const va=ta.concat(ua);return(va.length>=ra?qa:sa)(...va)};return sa()},h=(qa,ra)=>Array.prototype.every.call(qa,ra),j=toString.call,l=(qa)=>(ra)=>typeof ra===qa,m=(qa)=>(ra)=>toString.call(ra).includes(qa),p=(qa)=>qa!==f,t=l('function'),u=l('string'),w=l('boolean'),x=(qa)=>!w(qa)&&!isNaN(+qa),y=(qa)=>u(qa)||w(qa)||!isNaN(qa),z=(qa)=>x(qa)&&0==qa%1,A=m('Object'),B=Array.isArray,C=(qa)=>qa!==f&&'undefined'!=typeof qa.length,D=(qa)=>(A(qa)?!Object.keys(qa).length:C(qa)?!qa.length:!qa.size)||t(qa),E=(qa)=>qa&&(qa instanceof Node||qa.pure instanceof Node),G=m('HTML'),H=(qa)=>G(qa)&&'INPUT TEXTAREA'.includes(qa.tagName),I=m('Map'),J=m('Set'),K=g((qa,ra)=>qa===ra),L=(qa,ra)=>{if(p(qa)&&t(ra))if(C(qa)&&(qa=[...qa]),qa.forEach)qa.forEach(ra);else{let sa=0;if(A(qa))for(sa in qa)ra(qa[sa],sa,qa);else if(z(qa))for(;qa!=sa;)ra(sa+=1)}},M=g(Object.defineProperty),N=Object.getOwnPropertyDescriptor,O=g((qa,ra)=>{for(let sa of Object.keys(ra))M(qa,sa,N(ra,sa));return qa}),P=(qa,ra)=>{for(let sa of Object.keys(ra))sa in qa||M(qa,sa,N(ra,sa));return qa},Q=(qa)=>C(qa)?Array.prototype.reduce.call(qa,(ra,sa)=>ra.concat(B(sa)?Q(sa):sa),[]):[qa],R=(qa,ra=e)=>(u(ra)?e.querySelector(ra):ra).querySelector(qa),S=(qa,ra=e)=>Array.from((u(ra)?R(ra):ra).querySelectorAll(qa)),U=(qa)=>new TypeError(qa),V=(qa)=>new Error(qa),W=(qa,ra=e)=>ra==qa||!!(16&ra.compareDocumentPosition(qa)),X=g((qa,ra,sa,ta=!1)=>{function ua(za){sa.call(qa,za,qa),xa&&wa(ua)}if(!u(ra))throw U('event type not string');if(u(qa)&&(qa=R(qa)),!qa||!qa.addEventListener)throw V('EventManager: Target Invalid');const va=qa.addEventListener.bind(qa,ra),wa=qa.removeEventListener.bind(qa,ra);let xa=!1;G(qa)&&(qa=ma(qa));const ya={off(){return wa(ua),qa.listeners&&qa.listeners.delete(ya),ya},on(){return xa=!1,va(ua,ta),qa.listeners&&qa.listeners.add(ya),ya},once(){return wa(ua),xa=!0,va(ua,ta),qa.listeners&&qa.listeners.add(ya),ya},activate:(za)=>ya[za?'once':'on']()};return ya},3),Y=(qa=new Map)=>{const ra={handle(sa,ta,ua){return ua.one=!!sa,(qa.has(ta)?qa:qa.set(ta,new Set)).get(ta).add(ua),ua.off=()=>ra.off(ta,ua),ua},on:(sa,ta)=>ra.handle(!1,sa,ta),once:(sa,ta)=>ra.handle(!0,sa,ta),off(sa,ta){qa.has(sa)&&!qa.get(sa).delete(ta).size&&qa.delete(sa)},has:(sa)=>qa.has(sa),emit(sa,...ta){qa.has(sa)&&qa.get(sa).forEach((ua)=>{ua(...ta),ua.one&&ua.off()})}};return ra},Z=g((qa,...ra)=>X(...ra).activate(!!qa),4),$=Z(!1),aa=Z(!0),ba='create mount destroy attr'.split(' ');let ca=!1,da=new Set;aa(b,'DOMContentLoaded',()=>{ca=!0,da.forEach((qa)=>qa()),da.clear(),da=null});const ea=(qa)=>ca?qa():da.add(qa),fa=(...qa)=>(ra='body')=>{E(ra)?(ra=ma(ra),L(Q(qa),(sa)=>J(sa)||C(sa)?L(sa,(ta)=>ra.append(ta)):ra.append(sa))):u(ra)&&ea(()=>{if(!E(ra=ma('body'==ra?e.body:R(ra))))throw V('rot.render: invalid render node');L(Q(qa),(sa)=>J(sa)||C(sa)?L(sa,(ta)=>ra.append(ta)):ra.append(sa))})},ha=(qa)=>e.createRange().createContextualFragment(qa||''),ia=(qa)=>y(qa)?ha(qa):e.createDocumentFragment(),ja=(qa)=>P(rot,qa);O(ja,{methods:{},handles:new Set});const ka={replace:(qa,ra,sa)=>qa.replaceWith?qa.replaceWith(sa):qa.parentNode.replaceChild(sa,qa),clone:(qa)=>ma(qa.cloneNode()),css(qa,ra,sa,ta){if(A(sa))L(sa,(ua,va)=>qa.style[va]=ua);else if(u(sa)&&u(ta))qa.style[sa]=ta;else throw U('CSS : Styles is not an object or string pair');return ra},inner(qa,ra,...sa){ra.html='';for(let ta of Q(sa))ta.appendTo?(ra.children.includes(ta)||ta.inf.emit('mount',ta),ta.appendTo(qa)):(y(ta)&&(ta=e.createTextNode(ta)),E(ta)&&ra.append(ta));return ra},append(qa,ra,...sa){const ta=ia();return sa.forEach((ua)=>{E(ua.pure)&&(ua=ua.pure),ta.appendChild(E(ua)?ua:ha(ua))}),qa.appendChild(ta),ra},prepend(qa,ra,...sa){const ta=ia();return sa.forEach((ua)=>{E(ua.pure)&&(ua=ua.pure),ta.appendChild(E(ua)?ua:ha(ua))}),qa.prepend(ta),ra},appendTo(qa,ra,sa){return(u(sa)?R(sa):sa).appendChild(qa),ra},prependTo(qa,ra,sa){return(u(sa)?R(sa):sa).prepend(),ra},find(qa,ra,sa){let ta=R(sa,qa);if(E(ta))return ma(ta)},modify(qa,ra,sa){return sa.call(ra,ra,qa),ra},remove(qa,ra,sa){return x(sa)?setTimeout(()=>qa.remove(),sa):qa.remove(),ra}},la=new Map,ma=new Proxy((qa)=>{if(u(qa)&&(qa=R(qa)),G(qa)){if(la.has(qa))return la.get(qa);const ra=new Proxy((Ea,Fa)=>{if(A(Ea))L(Ea,(Ga,Ha)=>qa.setAttribute(Ga,Ha));else if(p(Fa))qa.setAttribute(Ea,Fa);else return qa.getAttribute(Ea)},{get(Ea,Fa){return'has'==Fa?(Ga)=>qa.hasAttribute(Ga):qa.getAttribute(Fa)},set(Ea,Fa,Ga){return qa.setAttribute(Fa,Ga),!0},deleteProperty(Ea,Fa){return qa.removeAttribute(Fa),!0}}),sa=new Proxy((Ea,Fa=!qa.classList.contains(Ea))=>{return qa.classList[Fa?'add':'remove'](Ea),Da},{get(Ea,Fa){return'remove'==Fa?(Ga)=>{return qa.classList.remove(Ga),Da}:qa.classList.contains(Fa)},set(Ea,Fa,Ga){return Ea(Fa,Ga),!0},deleteProperty(Ea,Fa){return qa.classList.remove(Fa),!0}}),ta=Y(),ua=new Set,va=(Ea)=>new Proxy(Ea.bind(qa,qa),{get(Fa,Ga){return Fa(Ga)},set(Fa,Ga,Ha){if(t(Ha))return Fa(Ga,Ha)}}),wa=va($),xa=va(aa),ya={on:(Ea,Fa)=>ta.on('data:'+Ea,Fa),once:(Ea,Fa)=>ta.once('data:'+Ea,Fa),emit(Ea,...Fa){return ta.emit('data:'+Ea,...Fa),ya},isInput:H(qa)},za=(Ea)=>t(Ea)?Ea.bind(qa):Ea,Aa=(Ea)=>{const Fa=za(Reflect.get(ya,Ea));return ya.emit('get',Fa).emit('get:'+Ea,Fa),Fa},Ba=ya.isInput?'value':'innerHTML',Ca=ya.isInput?'value':'textContent',Da=new Proxy(qa,{get(Ea,Fa){return Fa in ka?ka[Fa].bind(Ea,Ea,Da):'children'==Fa?Array.prototype.map.call(Ea.children,(Ga)=>ma(Ga)):Fa in Ea?za(Reflect.get(Ea,Fa)):'class'==Fa?sa:'attr'==Fa?ra:'pure'==Fa?Ea:'listeners'==Fa?ua:'informer'==Fa||'inf'==Fa?ta:'on'==Fa?wa:'once'==Fa?xa:'html'==Fa?Ea[Ba]:'txt'==Fa?Ea[Ca]:'mounted'==Fa?W(qa):'data'==Fa?ya:Fa in ya?Aa(Fa):Fa in ja.methods?ja.methods[Fa].bind(Ea,Ea,Da):f},set(Ea,Fa,Ga,Ha){if(Fa in Ea)return Reflect.set(Ea,Fa,Ga);if('class'==Fa&&u(Ga))Ga.includes(' ')?Ga.split(' ').forEach((Ia)=>Ea.classList.add(Ia)):Ea.classList.add(Ga);else if('html'==Fa||'txt'==Fa)t(Ga)&&(Ga=Ga(Ea['txt'==Fa?Ca:Ba])),Ga==f&&(Ga=''),Ea['txt'==Fa?Ca:Ba]=Ga;else if('attr'==Fa&&A(Ga))L(Ga,(Ia,Ja)=>qa.setAttribute(Ja,Ia));else if('data'==Fa&&A(Ga))for(let Ia in Ga){const Ja=N(Ga,Ia);Ja.get&&(Ja.get=Ja.get.bind(Ha)),Ja.set&&(Ja.set=Ja.set.bind(Ha)),t(Ja.value)&&(Ja.value=Ja.value.bind(Ha)),Object.defineProperty(ya,Ia,Ja)}else if('css'==Fa&&A(Ga))Ha.css(Ga);else return Reflect.set(ya.emit('set',Ga).emit('set:'+Fa,Ga),Fa,Ga);return!0},deleteProperty(Ea,Fa){return'self'==Fa?void Ea.remove():Reflect.deleteProperty(ya,Fa)}});return ta.once('destroy',()=>la.delete(qa)),la.set(qa,Da),Da}},{get(qa,ra){return ra in qa?Reflect.get(qa,ra):na.bind(f,ra)},set(qa,ra){return Reflect.set(qa,ra)}}),na=(qa,ra,...sa)=>{const ta=ma(e.createElement(qa));if(C(ra)||E(ra))sa=u(ra)||E(ra)?[ra]:ra,ra=null;else if(A(ra)){const{attr:ua,lifecycle:va}=ra;if(va)for(let wa of ba)t(va[wa])&&ta.inf.once(wa,(...xa)=>va[wa].apply(ta,xa));for(let wa of ja.handles)wa(ra,ta);L(ra,(wa,xa)=>{'class'==xa||'className'==xa?ta.className=wa:'style'==xa||'css'==xa?ta.css(wa):'on'==xa||'once'==xa?L(wa,(ya,za)=>ta[xa][za]=ya):('props'==xa||'data'==xa)&&A(wa)?ta.data=wa:xa in ta?ta[xa]=wa:y(wa)&&(ta.attr=wa)}),ua&&!D(ua)&&(ta.attr=ua)}return D(sa)||ta.inner(...sa),ta.tagName.includes('-')||ta.mounted||ta.inf.emit('create',ta),ra&&ra.render?fa(ta)(ra.render):ta.render=(ua='body')=>fa(ta)(ua),ta},oa=Y();return $(b,'hashchange',()=>oa.has(location.hash)?oa.emit(location.hash):oa.emit('default',location.hash)),(ma.extend=O(ma))({query:R,queryAll:S,queryEach:(qa,ra,sa=e)=>{t(ra)||(ra=sa,sa=e),L(S(qa,sa),ra)},on:$,once:aa,html:ha}),new MutationObserver((qa)=>{for(let ra of qa){const{removedNodes:sa,addedNodes:ta,target:ua,attributeName:va}=ra;let wa;if(0<sa.length)for(wa of sa)G(wa)&&!wa.tagName.includes('-')&&(wa=ma(wa)).inf.emit('destroy',wa);if(0<ta.length)for(wa of ta)G(wa)&&!wa.tagName.includes('-')&&(wa=ma(wa)).inf.emit('mount',wa);'style'!=va&&G(ua)&&(wa=ma(ua)).inf.emit('attr:'+va,wa.attr[va],ra.oldValue,wa.attr.has(va),wa)}}).observe(e,{attributes:!0,childList:!0,subtree:!0}),{dom:ma,evtsys:Y,EventManager:X,plugins:ja,extend:O,safeExtend:P,def:M,getdesc:N,route:(qa,ra)=>{return t(qa)&&(ra=qa,qa='default'),location.hash===qa&&ra(),oa.on(qa,ra)},render:fa,run:ea,curry:g,each:L,DOMcontains:W,flatten:Q,isDef:p,isUndef:(qa)=>qa===f,isPrimitive:y,isNull:(qa)=>null===qa,isFunc:t,isStr:u,isBool:w,isNum:x,isInt:z,isObj:A,isArr:B,isArrlike:C,isEmpty:D,isEl:G,isEq:K,isNode:E,isNodeList:(qa)=>qa instanceof NodeList||C(qa)&&h(qa,E),isInput:H,isMap:I,isSet:J}});
