(function(d,f,h){'undefined'!=typeof module&&module.exports?module.exports=h():'function'==typeof define&&define.amd?define(d,h):f[d]=h()})('rot',this,function(){function d(ca,da){D(da)||(da=u(da)?N(da):h.createElement(ca.tag));const ea=_(da);return da.dm=ea,ca.class&&(da.className=ca.class),ca.inner?ea.html(t(ca.inner)?ca.inner(ea,da):ca.inner):ca.text&&ea.Text(ca.text),ca.style&&ea.css(ca.style),ca.attr&&ea.setAttr(ca.attr),ca.on&&I(ca.on,(fa,ga)=>{let ha;if(t(fa))ha=Z(da,ga,fa);else if(A(fa))ha=Z(da,ga,...fa);else if(z(fa))if(fa.isInformer)ha=Z(da,ga,fa.inform.bind(fa));else{const{handle:ia,options:ja}=fa;ha=Z(da,ga,ia,ja)}ha&&ea.listeners.push(ha)}),ea.extend=L(ea),I(aa,fa=>{ea.lifecycle[fa]=new U,z(ca.lifecycle)&&t(ca.lifecycle[fa])&&(ca.lifecycle[fa]=ea.lifecycle[fa]['update'===fa?'on':'once'](ca.lifecycle[fa]))}),z(ca.props)&&L(ea,ca.props),V.methods&&L(ea,V.methods),V.handles&&I(V.handles,fa=>fa(ca,ea,da)),ea.lifecycle[ea.mounted?'mount':'create'].inform(ea,da),ea}const f=window||global,h=document,j=(ca,da)=>{return isNaN(da)&&(da=ca.length),function ea(...fa){return(...ga)=>{const ha=fa.slice().concat(ga);return(ha.length>=da?ca:ea)(...ha)}}()},k=j((ca,da)=>ca.includes(da)),l=Object.keys,m=(ca,da)=>Array.prototype.every.call(ca,da),n=toString.call,p=ca=>da=>toString.call(da).includes(ca),q=ca=>void 0!==ca,r=ca=>void 0===ca,t=ca=>'function'==typeof ca,u=ca=>'string'==typeof ca,w=ca=>'boolean'==typeof ca,x=ca=>!w(ca)&&!isNaN(+ca),y=ca=>x(ca)&&0==ca%1,z=p('Object'),A=Array.isArray,B=ca=>void 0!==ca&&'undefined'!=typeof ca.length,C=ca=>{try{return(z(ca)?!l(ca).length:B(ca)?!ca.length:!ca.size)||''===ca}catch(da){}return!1},D=ca=>ca instanceof Node,E=p('HTML'),F=ca=>E(ca)&&['INPUT','TEXTAREA'].some(k(ca.tagName)),G=p('Map'),H=p('Set'),I=(ca,da)=>{if(t(da))if(ca.forEach&&!C(ca))ca.forEach(da);else{let ea=0;if(B(ca)&&!localStorage)for(;ea<ca.length;ea+=1)da(ca[ea],ea,ca);else if(y(ca)&&!u(ca))for(;ca!=ea;)da(ea+=1);else for(ea in ca)ca.hasOwnProperty(ea)&&da(ca[ea],ea,ca)}},J=j(Object.defineProperty),K=Object.getOwnPropertyDescriptor,L=j((ca,da)=>{return I(l(da),ea=>J(ca,ea,K(da,ea))),ca}),M=ca=>Array.prototype.reduce.call(ca,(da,ea)=>da.concat(A(ea)?M(ea):ea),[]),N=(ca,da=h)=>{try{return(u(da)?h.querySelector(da):da).querySelector(ca)}catch(ea){return!1}},O=(ca,da=h)=>{try{if(u(da)&&(da=N(da)),D(da))return Array.from(da.querySelectorAll(ca))}catch(ea){}return!1},P=(ca,da,ea)=>{t(da)&&(ea=da,da=null);const fa=O(ca,da);return B(fa)&&I(fa,ea),fa},Q=(ca,da=h)=>da==ca||!!(16&da.compareDocumentPosition(ca)),R=(ca,da)=>null==ca||null==da?!1:ca===da||ca.length==da.length&&m(ca,(ea,fa)=>ea==da[fa]),S=ca=>'DOMContentLoaded blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu pointerdown pointerup pointermove pointerover pointerout pointerenter pointerleave touchstart touchend touchmove touchcancel'.includes(ca),T=j((ca,da,ea,fa=!1)=>{if(u(ca)&&(ca=N(ca)),!ca||!ca.addEventListener)throw new Error('EventManager: Target Invalid');let ga=!1;return{on(){return ga||(ca.addEventListener(da,ea,fa),ga=!0),this},off(){return ca.removeEventListener(da,ea),ga=!1,this},once(){return this.off().active=!0,ca.addEventListener(da,function ha(){ea.apply(this,arguments),ca.removeEventListener(event,ha)},fa),this}}},3);class U{constructor(){this.handles=new Set,this.isInformer=!0}handle(ca,da){if(t(ca)&&(da=ca,ca=!1),!t(da))throw new TypeError('informer.handle : ought to be a function');const ea=this.handles,fa=ga=>{return da._once=!!ga,ea.add(da),da};return da.off=()=>{return ea.delete(da),da},da.on=fa,da.once=fa.bind(null,!0),fa(ca)}has(ca){return this.handles.has(ca)}on(ca){return this.handle(ca)}once(ca){return this.handle(!0,ca)}off(ca){this.handles.delete(ca)}get empty(){return 0==this.handles.size}get size(){return this.handles.size}inform(...ca){R(this.lastInform,ca)||(this.lastInform=ca,0!=this.handles.size&&this.handles.forEach(da=>{da(...ca),da._once&&da.off()}))}forceInform(...ca){this.lastInform=ca,this.handles.forEach(da=>{da(...ca),da._once&&da.off()})}static fromEvent(ca,da,ea=!1,fa){if(u(ca)&&S(ca)?(fa=ea,ea=da,da=ca,ca=f):ca=N(ca),!ca.addEventListener)throw new Error('informer.fromEvent: target.addEventListener not found');if(1==arguments.length)return U.fromEvent.bind(null,ca);if(!u(da))throw new TypeError('informer.fromEvent: eventtype isn\'t a string');w(ea)||(fa=ea,ea=!1);let ga=new U;const ha=T(ca,da,ia=>{ga.inform(ia,ha),ea&&(ga=null)},fa)[ea?'once':'on']();return ga}static propHook(ca,da,ea){const fa=new U,ga=K(ca,da);ga.enumerable=!1;const ha='informer-'+da,ia='get',ja='set';return J(ca,ha,ga),J(ca,da,{get(){const ka=ea?ea(ia,ca[ha]):ca[ha];return fa.inform(ia,ka),ka},set(ka){const la=ca[ha],ma=ea?ea(ja,la,ka):ka;fa.inform(ja,la,ma),ca[ha]=ma}}),fa}}const V={methods:{},handles:new Set};J(V,'extend',{value:L(V.methods),enumerable:!1});const W=ca=>h.createRange().createContextualFragment(ca||''),X=ca=>{if(u(ca))return W(ca);const da=h.createDocumentFragment();return da.appendChild(ca),da},Y=(ca,da)=>{return D(ca.node)&&(ca=ca.node),da=F(ca)?'value':da,function(){return arguments.length?(ca[da]&&ca[da].length&&(ca[da]=''),I(arguments,function ea(fa){u(fa)?ca[da]+=fa:A(fa)?I(fa,ea):q(fa)&&(fa.appendTo?fa.appendTo(ca):D(fa)?ca.appendChild(fa):z(fa)&&fa.isInformer&&fa.on(Y(ca,da)))}),this):ca[da]}},Z=j((ca,da,ea,fa)=>T(ca,da,ea,fa).on(),3),$=j((ca,da,ea,fa)=>T(ca,da,ea,fa).once(),3),_=ca=>({node:ca,hasAttr:ca.hasAttribute.bind(ca),getAttr:ca.getAttribute.bind(ca),setAttr(da,ea){const fa=ca.setAttribute.bind(ca);return r(ea)?z(da)?I(da,(ga,ha)=>fa(ha,ga)):u(da)&&(da.includes('=')||da.includes('&')?I(da.split('&'),ga=>{const ha=ga.split('=');fa(ha[0],q(ha[1])?ha[1]:'')}):fa(da,'')):fa(da,''),this},removeAttr(...da){return da.map(ca.removeAttribute.bind(ca)),this},toggleAttr(da,ea=''){return this[(w(ea)?ea:ca.hasAttribute(da))?'removeAttr':'setAttr'](da,ea)},hasClass:(...da)=>1==da.length?ca.classList.contains(da[0]):da.every(ea=>ca.classList.contains(ea)),addClass(){return I(arguments,da=>ca.classList.add(da)),this},removeClass(){return I(arguments,da=>ca.classList.remove(da)),this},toggleClass(da,ea){return ca.classList[(w(ea)?ea:ca.classList.contains(da))?'remove':'add'](da),this},replace(da){return ca.parentNode.replaceChild(da,ca),this},css(da,ea){if(z(da))I(da,(fa,ga)=>ca.style[ga]=fa);else if(u(da)&&u(ea))ca.style[da]=ea;else throw new TypeError('CSS : Styles is not an object or string pair');return this},html:Y(ca,'innerHTML'),Text:Y(ca,'textContent'),on:(da,ea,fa)=>T(ca,da,ea,fa).on(),once:(da,ea,fa)=>T(ca,da,ea,fa).once(),append(...da){const ea=X();return I(da,fa=>fa.appendTo?fa.appendTo(ea):D(fa)?ea.appendChild(fa):ea.innerHTML+=fa),ca.appendChild(X),this},prepend(...da){const ea=X();return I(da,fa=>fa.appendTo?fa.appendTo(ea):D(fa)?ea.appendChild(fa):ea.innerHTML+=fa),t(ca.prepend)?ca.prepend(X):ca.insertBefore(X,ca.firstChild),this},appendTo(da,ea){return u(da)&&(da=N(da,ea)),da.append?da.append(ca):da.appendChild&&da.appendChild(ca),this},prependTo(da,ea){return u(da)&&(da=N(da,ea)),da.prepend?da.prepend(ca):D(da)&&da.insertBefore(ca,da.firstChild),this},modify(da){return da(this,ca),this},listeners:[],get mounted(){return Q(ca)},lifecycle:{},attrupdate:new U,observeAttr(da,ea,fa=!1){return this.attrupdate[fa?'once':'on']((ga,...ha)=>da===ga&&ea(ga,...ha))}}),aa=['create','mount','destroy','update'],ba=j((ca,da)=>{if(!u(ca))throw new TypeError('invalid element instantiation parameters');return z(da)||(da=B(da)||D(da)?{inner:da}:{}),da.tag=ca,d(da)});return new MutationObserver(ca=>I(ca,da=>{if(0<da.removedNodes.length&&I(da.removedNodes,ea=>{ea.dm&&ea.dm.lifecycle.destroy.inform(ea.dm,ea)}),0<da.addedNodes.length&&I(da.addedNodes,ea=>{ea.dm&&ea.dm.lifecycle.mount.inform(ea.dm,ea)}),'attributes'==da.type&&'style'!=da.attributeName&&da.target.dm){const ea=da.target.dm,fa=da.attributeName;ea.attrupdate.inform(fa,ea.getAttr(fa),da.oldValue,ea.hasAttr(fa),ea)}})).observe(h,{attributes:!0,childList:!0,subtree:!0}),L(ba,{extend:L,query:N,queryAll:O,queryEach:P,on:Z,once:$}),I('picture img input list a script table td th tr article aside ul ol li h1 h2 h3 h4 h5 h6 div span pre code section button br label header i style nav menu main menuitem'.split(' '),ca=>ba[ca]=ba(ca)),{informer:U,EventManager:T,isNativeEvent:S,dom:ba,plugins:V,extend:L,safeExtend:(ca,da)=>{return I(l(da),ea=>!(ea in ca)&&J(ca,ea,K(da,ea))),ca},def:J,getdesc:K,get:(ca,da)=>new Promise((ea,fa)=>{da.replace(/\[(\w+)\]/g,'.$1').replace(/^\./,'').split('.').map(ga=>{ca=ga in ca?ca[ga]:void 0}),q(ca)?ea(ca):fa()}),set:(ca,da,ea)=>new Promise(fa=>{da=da.split('.');const ga=da.length-1;da.map((ha,ia)=>{void 0==ca[ha]&&(ca[ha]={}),ga==ia?ca[ha]=ea:ca=ca[ha]}),fa()}),rename:(ca,da,ea)=>{return I(da,(fa,ga)=>{J(ca,ea[ga],K(ca,fa)),delete ca[fa]}),ca},run:ca=>'complete'==h.readyState?ca():U.fromEvent('DOMContentLoaded',!0).once(ca),curry:j,each:I,query:N,queryAll:O,queryEach:P,DOMcontains:Q,arraysEqual:R,flatten:M,isDef:q,isUndef:r,isPrimitive:ca=>'string'==typeof ca||'number'==typeof ca,isNull:ca=>null===ca,isFunc:t,isStr:u,isBool:w,isNum:x,isInt:y,isObj:z,isArr:A,isArrlike:B,isEmpty:C,isEl:E,isNode:D,isNodeList:ca=>ca instanceof NodeList||B(ca)&&!C(ca)&&m(ca,D),isInput:F,isMap:G,isSet:H}});
