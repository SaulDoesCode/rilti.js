var _this=this;((b,f)=>{const g='rot';b[g]=f(),'undefined'!=typeof module&&module.exports?module.exports=f():'function'==typeof define&&define.amd&&define(g,f)})(this,()=>{'use strict';const b=(la,ma=la.length)=>{const na=(...oa)=>(...pa)=>{const qa=oa.concat(pa);return(qa.length>=ma?la:na)(...qa)};return na()},f=window||global||_this,g=document,j=void 0,l=Object.keys,m=(la,ma)=>Array.prototype.every.call(la,ma),p=toString.call,q=la=>ma=>typeof ma===la,r=la=>ma=>toString.call(ma).includes(la),u=la=>la!==j,w=q('function'),x=q('string'),y=q('boolean'),z=la=>!y(la)&&!isNaN(+la),A=la=>x(la)||y(la)||!isNaN(la),B=la=>z(la)&&0==la%1,C=r('Object'),D=Array.isArray,E=la=>la!==j&&'undefined'!=typeof la.length,F=la=>(C(la)?!l(la).length:E(la)?!la.length:!la.size)||w(la),G=la=>la instanceof Node,H=r('HTML'),I=la=>H(la)&&'INPUT TEXTAREA'.includes(la.tagName),J=r('Map'),K=r('Set'),L=b((la,ma)=>la===ma),M=(la,ma)=>{if(u(la)&&w(ma))if(E(la)&&(la=Array.from(la)),la.forEach)la.forEach(ma);else{let na=0;if(C(la))for(na in la)ma(la[na],na,la);else if(B(la))for(;la!=na;)ma(na+=1)}},N=b(Object.defineProperty),O=Object.getOwnPropertyDescriptor,P=b((la,ma)=>{for(let na of l(ma))N(la,na,O(ma,na));return la}),Q=(la,ma)=>{for(let na of l(ma))na in la||N(la,na,O(ma,na));return la},R=la=>E(la)?Array.prototype.reduce.call(la,(ma,na)=>ma.concat(D(na)?R(na):na),[]):[la],S=(la,ma=g)=>(x(ma)?g.querySelector(ma):ma).querySelector(la),T=(la,ma=g)=>Array.from((x(ma)?S(ma):ma).querySelectorAll(la)),U=la=>new TypeError(la),V=la=>new Error(la),W=(la,ma=g)=>ma==la||!!(16&ma.compareDocumentPosition(la)),X='DOMContentLoaded hashchange blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu pointerdown pointerup pointermove pointerover pointerout pointerenter pointerleave touchstart touchend touchmove touchcancel'.split(' '),Y=b((la,ma,na,oa=!1)=>{function pa(ua){na.call(la,ua,la),sa&&ra(pa)}if(x(la)&&(la=S(la)),!la||!la.addEventListener)throw V('EventManager: Target Invalid');const qa=la.addEventListener.bind(la,ma),ra=la.removeEventListener.bind(la,ma);let sa=!1;H(la)&&ia.has(la)&&(la=ia.get(la));const ta={off(){return ra(pa),la.listeners&&la.listeners.delete(ta),ta},on(){return sa=!1,qa(pa,oa),la.listeners&&la.listeners.add(ta),ta},once(){return ra(pa),sa=!0,qa(pa,oa),la.listeners&&la.listeners.add(ta),ta}};return ta},3),Z=(la=new Set)=>({handles:la,isInformer:!0,handle(ma,na=ma){if(!w(na))throw U('informer.handle: is not a function');return na.off=()=>{return la.delete(na),na},na.on=oa=>{return na.off().one=!!oa,la.add(na),na},na.once=na.on.bind(null,!0),na.on(!!y(ma)&&ma)},on(ma){return this.handle(ma)},once(ma){return this.handle(!0,ma)},off(ma){la.delete(ma)},get empty(){return 1>la.size},inform(){if(la.size)for(let ma of la)ma(...arguments),ma.one&&ma.off();return this}}),$=la=>b((...ma)=>Y(...ma)[la](),3),// listener type
_=$('on'),aa=$('once');Z.fromEvent=(la,ma,na,oa)=>{if(x(la)&&(la=S(la)),!la.addEventListener)throw V('invalid event target');if(!x(ma))throw U('event type not string');const pa=Z(),qa=$(na?'once':'on')(la,ma,ra=>pa.inform(ra,qa),oa);return pa};const ba=Z.fromEvent(f,'DOMContentLoaded',!0),ca='create mount destroy update attr'.split(' '),da=la=>'complete'==g.readyState?la():ba.once(la),ea=la=>g.createRange().createContextualFragment(la||''),fa=la=>A(la)?ea(la):g.createDocumentFragment(),ga=la=>Q(rot,la);P(ga,{methods:{},handles:new Set,muthandles:new Set});const ha={replace:(la,ma,na)=>la.replaceWith?la.replaceWith(na):la.parentNode.replaceChild(na,la),clone:la=>ja(la.cloneNode()),css(la,ma,na,oa){if(C(na))M(na,(pa,qa)=>la.style[qa]=pa);else if(x(na)&&x(oa))la.style[na]=oa;else throw U('CSS : Styles is not an object or string pair')},inner(la,ma,...na){ma.html='';for(let oa of R(na))oa.appendTo?(ma.children.includes(oa)||oa.lifecycle.mount.inform(oa),oa.appendTo(la)):(A(oa)&&(oa=g.createTextNode(oa)),G(oa)?ma.append(oa):oa.isInformer&&oa.on(ma.inner));return ma},append(la,ma,...na){const oa=fa();return na.forEach(pa=>{G(pa.pure)&&(pa=pa.pure),oa.appendChild(G(pa)?pa:ea(pa))}),la.appendChild(oa),ma},prepend(la,ma,...na){const oa=fa();return na.forEach(pa=>{G(pa.pure)&&(pa=pa.pure),oa.appendChild(G(pa)?pa:ea(pa))}),la.prepend(oa),ma},appendTo(la,ma,na){return(x(na)?S(na):na).appendChild(la),ma},prependTo(la,ma,na){return(x(na)?S(na):na).prepend(),ma},modify(la,ma,na){return na.call(ma,ma,la),ma},remove(la,ma,na){return z(na)?setTimeout(()=>la.remove(),na):la.remove(),ma}},ia=new Map,ja=new Proxy(la=>{if(x(la)&&(la=S(la)),H(la)){if(ia.has(la))return ia.get(la);const ma=new Proxy({},{get(Ba,Ca){return'has'==Ca?Da=>la.hasAttribute(Da):la.getAttribute(Ca)},set(Ba,Ca,Da){return la.setAttribute(Ca,Da),!0},delete(Ba,Ca){return la.removeAttribute(Ca),!0}}),na=new Proxy({},{get(Ba,Ca){return'toggle'==Ca?(Da,Ea=!la.classList.contains(Da))=>Ea?la.classList.add(Da):la.classList.remove(Da):la.classList.contains(Ca)},set(Ba,Ca,Da){return'toggle'==Ca?la.classList.contains(Ca)?la.classList.remove(Da):la.classList.add(Da):la.classList.add(Da),!0},delete(Ba,Ca){return la.classList.remove(Ca),!0}}),oa=new Set,pa={get(Ba,Ca){return Ba(Ca)},set(Ba,Ca,Da){if(w(Da))return Ba(Ca,Da)}},qa={create:Z(),mount:Z(),destroy:Z(),attr:Z()},ra=new Proxy(_.bind(null,la),pa),sa=new Proxy(aa.bind(null,la),pa),ta={},ua=Z(),va=Ba=>(Ca,Da)=>w(Ca)?ua.handle(Ba,Ca):ua.handle(Ba,(Ea,Fa)=>{Ca===Ea&&Da(Fa)});ta.on=va(!1),ta.once=va(!0),ta.isInput=I(la);const wa=Ba=>w(Ba)?Ba.bind(la):Ba,xa=Ba=>{const Ca=wa(Reflect.get(ta,Ba));return ua.inform('get',Ca).inform('get:'+Ba,Ca),Ca},ya=ta.isInput?'value':'innerHTML',za=ta.isInput?'value':'textContent',Aa=new Proxy(la,{get(Ba,Ca){return Ca in ha?ha[Ca].bind(Ba,Ba,Aa):'children'===Ca?Array.from(Ba.children).map(Da=>ja(Da)):Ca in Ba?wa(Reflect.get(Ba,Ca)):'class'===Ca?na:'attr'===Ca?ma:'pure'===Ca?Ba:'listeners'===Ca?oa:'lifecycle'===Ca?qa:'on'===Ca?ra:'once'===Ca?sa:'html'===Ca?Ba[ya]:'txt'===Ca?Ba[za]:'mounted'===Ca?W(la):'data'===Ca?ta:Ca in ta?xa(Ca):j},set(Ba,Ca,Da,Ea){if(Ca in Ba)return Reflect.set(Ba,Ca);if('class'===Ca&&x(Da))Ba.classList.add(Da);else if('html'===Ca)w(Da)&&(Da=Da(Ba[ya])),Da===j&&(Da=''),Ba[ya]=Da;else if('txt'===Ca)w(Da)&&(Da=Da(Ba[za])),Da===j&&(Da=''),Ba[za]=Da;else if('attr'===Ca&&C(Da))M(Da,(Fa,Ga)=>la.setAttribute(Ga,Fa));else if('data'===Ca&&C(Da))for(let Fa in Da){const Ga=O(Da,Fa);Ga.get&&(Ga.get=Ga.get.bind(Ea)),Ga.set&&(Ga.set=Ga.set.bind(Ea)),w(Ga.value)&&(Ga.value=Ga.value.bind(Ea)),Object.defineProperty(ta,Fa,Ga)}else if('css'===Ca&&C(Da))Ba.css(Da);else return ua.inform('set',Da).inform('set:'+Ca,Da),Reflect.set(ta,Ca,Da);return!0},delete(Ba,Ca){return'self'===Ca?Ba.remove():ta.delete(Ca),!0}});return ia.set(la,Aa),Aa}},{get(la,ma){return ma in la?Reflect.get(la,ma):ka.bind(j,ma)},set(la,ma){return Reflect.set(la,ma)}}),ka=(la,ma,...na)=>{const oa=ja(g.createElement(la));if(C(ma)){let{attr:pa,lifecycle:qa}=ma;if(qa)for(let ra of ca)w(qa[ra])&&oa.lifecycle[ra].once((...sa)=>qa[ra].apply(oa,sa));for(let ra of ga.handles)ra(ma,oa);M(ma,(ra,sa)=>{'class'===sa?oa.class=ra:'style'===sa||'css'===sa?oa.css(ra):'on'===sa||'once'===sa?M(ra,(ta,ua)=>oa[sa][ua]=ta):'props'===sa&&C(ra)?oa.data=ra:!(sa in ga.methods)&&(sa in oa?oa[sa]=ra:pa&&A(ra)&&(pa[sa]=ra))}),pa&&!F(pa)&&(oa.attr=pa)}return F(na)||oa.inner(...na),oa.mounted||oa.lifecycle.create.inform(oa),oa};return(ja.extend=P(ja))({query:S,queryAll:T,queryEach:(la,ma,na=g)=>{w(ma)||(ma=na,na=g),M(T(la,na),ma)},on:_,once:aa,html:ea}),new MutationObserver(la=>{for(let ma of la){const{removedNodes:na,addedNodes:oa,target:pa,attributeName:qa}=ma;let ra;if(0<na.length)for(ra of na)ra instanceof Element&&(ra=ja(ra)).lifecycle.destroy.inform(ra);if(0<oa.length)for(ra of oa)ra instanceof Element&&(ra=ja(ra)).lifecycle.mount.inform(ra);if('style'!=qa&&pa instanceof Element&&(ra=ja(pa)).lifecycle.attr.inform(qa,ra.attr[qa],ma.oldValue,ra.attr.has(qa),ra),0<ga.muthandles.size)for(let sa of ga.muthandles)sa(pa,ma,ma.type)}}).observe(g,{attributes:!0,childList:!0,subtree:!0}),{dom:ja,informer:Z,EventManager:Y,plugins:ga,extend:P,safeExtend:Q,def:N,getdesc:O,render:(...la)=>ma=>da(()=>{u(ma)?x(ma)&&(ma=S(ma)):ma=g.body,G(ma)||V('rot.render: render-to node'),M(R(la),na=>{K(na)||E(na)?M(na,oa=>ma.appendChild(G(oa)?oa:oa.node)):ma.appendChild(G(na)?na:na.node)})}),run:da,curry:b,each:M,DOMcontains:W,flatten:R,isDef:u,isUndef:la=>la===j,isPrimitive:A,isNativeEvent:la=>X.includes(la),isNull:la=>null===la,isFunc:w,isStr:x,isBool:y,isNum:z,isInt:B,isObj:C,isArr:D,isArrlike:E,isEmpty:F,isEl:H,isEq:L,isNode:G,isNodeList:la=>la instanceof NodeList||E(la)&&m(la,G),isInput:I,isMap:J,isSet:K,ready:()=>'complete'==g.readyState}});
